<html>

<head>
  <style type="text/css">
    body {
      font-size: 16px;
    }
    .container {
      display: none;
    }
    .mask {
      width: 100%;
      height: 100%;
      opacity: .4;
      background-color: black;
      position: absolute;
      left: 0;
      top: 0;
      overflow: hidden;
      z-index: 100;
    }
    .popup{
      width: 200px;
      height: 120px;
      position: absolute;
      left: 50%;
      top: 50%;
      background-color: white;
      margin-left: -100px;
      margin-top: -60px;
      z-index: 101;
    }
    #confirm {
      background-color: gray; 
    }
  </style>
</head>

<body>
  <h1>test</h1>
  <div id="app">test function CR2; arguments is "[[1,3], [2,4], [5,6]], 2"</div>
  <div id="array-label">CR2 return array: <span id="array"></span></div>
  <div id="result-label">result: <span id="result"></span></div>
  <button id="confirm">calculate</button>
  <div class="container">
    <div class="mask"></div>
    <div class="popup"></div>
  </div>
  <script type="text/javascript">
    var testArray = [[1,3], [2,4], [5,6]];
    var num = 2;
    var resultDom = document.querySelector('#result');
    var arrayDom = document.querySelector('#array');
    var confirmDom = document.querySelector('#confirm');
    
    var CR2 = function(arr, num) {
      var result = [],
        rec = function(arr, result, current, start, num) {
          var m, l = arr.length - num,
            i, j;
          for (i = start; i <= l; i++) {
            for (j = 0; j < arr[i].length; j++) {
              m = current.slice(0);
              m.push(arr[i][j]);
              if (num == 1) {
                result.push(m);
              } else {
                rec(arr, result, m, i + 1, num - 1)
              }
            };
          }
        }
      rec(arr, result, [], 0, Â num || arr.length);
      return result;
    };
    
    var calculate = function(arr) {
      var sum = 0;
      var tmp;
      for(var i =0;i<arr.length;i++) {
        tmp = 1;
        for(var j=0;j<arr[i].length;j++) {
          tmp = tmp * arr[i][j]
        }
        sum = sum + tmp;
      }
      return sum;
    }
    
    var showPopup = function(text) {
      var curDom = document.querySelector('.container');
      var popup = document.querySelector('.popup');
      var mask = document.querySelector('.mask');
      mask.addEventListener('click', function(e){
        curDom.style.display = 'none';
      });
      if(!curDom) {
        // var curDom = document.createElement('div');
        // var popup = document.createElement('div');
        // var mask = document.createElement('div');
        // 
        // curDom.className = "container";
        // popup.className = 'popup';
        // mask.className = 'mask';
        // popup.innerText=text;
        // curDom.appendChild(mask);
        // curDom.appendChild(popup);
        // document.body.appendChild(curDom);
        // 
        // mask.addEventListener('click', function(e){
        //   curDom.style.display = 'none';
        // });
      } else {
        popup.innerText = text;
        curDom.style.display = 'block';
      }
    }
    
    confirmDom.addEventListener('click', function(e){
      var arr = CR2(testArray, num);
      var result = calculate(arr);
      resultDom.innerText = result;
      arrayDom.innerText = JSON.stringify(arr);
      showPopup('The result is ' + result);
    });
  </script>
</body>

</html>